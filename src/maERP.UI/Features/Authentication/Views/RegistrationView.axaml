<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="700"
             x:Class="maERP.UI.Features.Authentication.Views.RegistrationView">

  <Border Background="{DynamicResource SurfaceContainerBrush}"
          CornerRadius="{DynamicResource CornerRadiusL}"
          Padding="32"
          MaxWidth="400"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          BoxShadow="{DynamicResource ElevationLevel2}"
          BorderBrush="{DynamicResource OutlineVariantBrush}"
          BorderThickness="1">

    <StackPanel Spacing="24">

      <!-- Logo und Titel -->
      <StackPanel Spacing="12" HorizontalAlignment="Center">
        <TextBlock Text="maERP"
                   FontSize="{DynamicResource FontSizeDisplayS}"
                   FontWeight="SemiBold"
                   Foreground="{DynamicResource PrimaryBrush}"
                   HorizontalAlignment="Center"/>
        <TextBlock Text="Neues Konto erstellen"
                   FontSize="{DynamicResource FontSizeBodyL}"
                   Foreground="{DynamicResource ContentViewSubheadingBrush}"
                   HorizontalAlignment="Center"/>
      </StackPanel>

      <!-- Registrierungsformular -->
      <StackPanel Spacing="16">

        <!-- Server URL -->
        <StackPanel Spacing="4">
          <TextBlock Text="Server-URL"
                     FontWeight="SemiBold"
                     FontSize="{DynamicResource FontSizeBodyM}"
                     Foreground="{DynamicResource ContentViewHeadingBrush}"/>
          <TextBox Text="{Binding ServerUrl}"
                   Watermark="https://localhost:8443"
                   CornerRadius="{DynamicResource CornerRadiusS}"
                   Padding="12,8"
                   FontSize="{DynamicResource FontSizeBodyM}"/>
        </StackPanel>

        <!-- Vorname -->
        <StackPanel Spacing="4">
          <TextBlock Text="Vorname"
                     FontWeight="SemiBold"
                     FontSize="{DynamicResource FontSizeBodyM}"
                     Foreground="{DynamicResource ContentViewHeadingBrush}"/>
          <TextBox Text="{Binding FirstName}"
                   Watermark="Max"
                   CornerRadius="{DynamicResource CornerRadiusS}"
                   Padding="12,8"
                   FontSize="{DynamicResource FontSizeBodyM}"/>
        </StackPanel>

        <!-- Nachname -->
        <StackPanel Spacing="4">
          <TextBlock Text="Nachname"
                     FontWeight="SemiBold"
                     FontSize="{DynamicResource FontSizeBodyM}"
                     Foreground="{DynamicResource ContentViewHeadingBrush}"/>
          <TextBox Text="{Binding LastName}"
                   Watermark="Mustermann"
                   CornerRadius="{DynamicResource CornerRadiusS}"
                   Padding="12,8"
                   FontSize="{DynamicResource FontSizeBodyM}"/>
        </StackPanel>

        <!-- Email -->
        <StackPanel Spacing="4">
          <TextBlock Text="E-Mail-Adresse"
                     FontWeight="SemiBold"
                     FontSize="{DynamicResource FontSizeBodyM}"
                     Foreground="{DynamicResource ContentViewHeadingBrush}"/>
          <TextBox Text="{Binding Email}"
                   Watermark="name@domain.com"
                   CornerRadius="{DynamicResource CornerRadiusS}"
                   Padding="12,8"
                   FontSize="{DynamicResource FontSizeBodyM}"/>
        </StackPanel>

        <!-- Passwort -->
        <StackPanel Spacing="4">
          <TextBlock Text="Passwort"
                     FontWeight="SemiBold"
                     FontSize="{DynamicResource FontSizeBodyM}"
                     Foreground="{DynamicResource ContentViewHeadingBrush}"/>
          <TextBox Text="{Binding Password}"
                   PasswordChar="●"
                   RevealPassword="False"
                   Watermark="Mindestens 8 Zeichen"
                   CornerRadius="{DynamicResource CornerRadiusS}"
                   Padding="12,8"
                   FontSize="{DynamicResource FontSizeBodyM}"/>
        </StackPanel>

        <!-- Passwort bestätigen -->
        <StackPanel Spacing="4">
          <TextBlock Text="Passwort bestätigen"
                     FontWeight="SemiBold"
                     FontSize="{DynamicResource FontSizeBodyM}"
                     Foreground="{DynamicResource ContentViewHeadingBrush}"/>
          <TextBox Text="{Binding ConfirmPassword}"
                   PasswordChar="●"
                   RevealPassword="False"
                   Watermark="Passwort wiederholen"
                   CornerRadius="{DynamicResource CornerRadiusS}"
                   Padding="12,8"
                   FontSize="{DynamicResource FontSizeBodyM}"/>
        </StackPanel>

        <!-- Fehlermeldung -->
        <Border IsVisible="{Binding ErrorMessage, Converter={x:Static ObjectConverters.IsNotNull}}"
                Background="{DynamicResource ErrorBrush}"
                BorderBrush="{DynamicResource ErrorBrush}"
                BorderThickness="1"
                CornerRadius="{DynamicResource CornerRadiusS}"
                Padding="12"
                Opacity="0.1">
          <TextBlock Text="{Binding ErrorMessage}"
                     Foreground="{DynamicResource OnErrorBrush}"
                     FontSize="{DynamicResource FontSizeBodyM}"
                     TextWrapping="Wrap"/>
        </Border>

        <!-- Register Button -->
        <Button Content="Registrieren"
                Command="{Binding RegisterCommand}"
                IsEnabled="{Binding !IsLoading}"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                Padding="0,12"
                CornerRadius="{DynamicResource CornerRadiusS}"
                FontWeight="SemiBold"
                FontSize="{DynamicResource FontSizeBodyL}"
                Background="{DynamicResource PrimaryBrush}"
                Foreground="{DynamicResource OnPrimaryBrush}">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Background" Value="{DynamicResource PrimaryContainerBrush}"/>
            </Style>
          </Button.Styles>
        </Button>

        <!-- Loading Indicator -->
        <StackPanel IsVisible="{Binding IsLoading}"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Spacing="8">
          <ProgressBar IsIndeterminate="True" Width="20" Height="20"/>
          <TextBlock Text="Registrierung läuft..."
                     FontSize="{DynamicResource FontSizeBodyM}"
                     Foreground="{DynamicResource ContentViewSubheadingBrush}"/>
        </StackPanel>

        <!-- Back to Login Link -->
        <Button Content="Zurück zur Anmeldung"
                Command="{Binding BackToLoginCommand}"
                HorizontalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Foreground="{DynamicResource PrimaryBrush}"
                FontSize="{DynamicResource FontSizeBodyM}"
                Padding="8,4">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Foreground" Value="{DynamicResource PrimaryContainerBrush}"/>
            </Style>
          </Button.Styles>
        </Button>

      </StackPanel>

    </StackPanel>

  </Border>

</UserControl>